---
layout: post
title: "[SpringBoot] jpa-ddl-auto"
date: 2023-09-03 21:02:17 +0900
categories: TIL
---

jpa-ddl-auto을 update로 설정했는데, 왜 DB스키마가 바뀌지않을까? 의문스러워서 다시 공부해봤다.

### create

entity에 등록된 클래스와 매핑되는 테이블을 자동으로 생성해준다. 테이블이 이미 존재한다면 drop하고 생성한다.

### create-drop

create와 같지만 애플리케이션을 종료할 때 테이블을 삭제한다.

### update

기존 테이블이 존재하면 테이블을 삭제하지 않고 컬럼을 변경한다. 하지만 모든 변경사항을 반영하는것이 아니라 기존에 존재하는 칼럼의 속성(nullable, 크기, 데이터타입)등은 건드리지않고, 새로운 컬럼이 추가되는 변경사항만 반영한다.

### validate

DDL을 작성하여 테이블을 생성하거나 수정하지 않고, entity클래스와 테이블이 정상적으로 매핑되는지만 검사한다. 만약 테이블이 존재하지 않거나 테이블의 컬럼과 엔티티의 필드가 매핑되지 않는 컬럼이 존재하면 예외를 발생시키면서 애플리케이션을 종료한다.

### none

`update` 를 해도 속성이 바뀌지는 않는다! DB에서 쿼리를 작성해 직접 바꿔주던가, 새로 테이블을 생성해야했다.
